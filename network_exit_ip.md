# 获取网络出口 IP 方法

网络出口 IP，通常指当前设备访问互联网时，外部看到的 **公网 IP**（NAT
出口地址）。

------------------------------------------------------------------------

## 1. 通过公网服务查询

因为出口 IP 是运营商 NAT
后的地址，本地机器通常无法直接知道，最简单是访问外部服务：

### 命令行方式

``` bash
curl ifconfig.me
curl ipinfo.io/ip
curl icanhazip.com
curl ident.me
```

### PowerShell

``` powershell
(Invoke-WebRequest -Uri "https://ifconfig.me/ip").Content
```

### Python

``` python
import requests
ip = requests.get("https://ifconfig.me").text
print(ip)
```

------------------------------------------------------------------------

## 2. 使用 STUN / WebRTC 技术

在浏览器或网络程序中，可以借助 STUN 服务器获取 NAT 映射后的公网 IP： -
WebRTC 在浏览器里可以直接拿到。 - 常见库：`pystun3` (Python)，`stun`
(Go/Node.js) 等。

------------------------------------------------------------------------

## 3. 运营商网关或路由器上查询

如果你在局域网环境，可以登录出口网关（比如光猫、路由器、防火墙）： - 在
WAN 设置里会显示公网 IP。 - 但如果是大内网（运营商 NAT /
CGNAT），看到的可能是内网地址，不是真正的出口 IP。

------------------------------------------------------------------------

## 4. 企业环境

如果是公司或数据中心： - 可能有多条出口链路，不同流量会走不同 IP。 -
通常需要在防火墙、负载均衡或出口路由器上查看。

------------------------------------------------------------------------

## 注意事项

-   如果在 **运营商 NAT（CGNAT）** 背后，自己拿到的出口 IP
    可能是共享的。
-   如果开了 **VPN / 代理**，你拿到的是 VPN/代理的出口 IP。
