## 问题 #279

一家公司有一个由 **Amazon DynamoDB 表** 支持的应用程序。  
合规要求如下：

- **每月备份一次**
- **备份必须可用 6 个月**
- **总保留期为 7 年**

哪种解决方案可以满足这些要求？

A. 创建一个 **AWS Backup 计划**，在每月第一天备份 DynamoDB 表。  
   指定生命周期策略，在 **6 个月后转移到冷存储**，并将 **保留期设置为 7 年**。  

B. 创建一个 **DynamoDB 按需备份**，每月第一天执行。  
   6 个月后将备份转移到 **Amazon S3 Glacier Flexible Retrieval**，  
   并使用 S3 生命周期策略在 7 年后删除。  

C. 使用 **AWS SDK 脚本** 创建 DynamoDB 按需备份，  
   用 EventBridge 每月触发；  
   再写第二个脚本，将 6 个月后的备份转移到冷存储并删除 7 年以上的备份。  

D. 使用 **AWS CLI** 创建 DynamoDB 按需备份，  
   用 EventBridge 每月触发，  
   在命令中指定 6 个月后转冷、7 年后删除。  

---

## 正确答案
**👉 A**

---

## 解析

### 关键考点
这是一个**典型的合规 + 长期保留 + 生命周期管理**场景，考察点包括：

- DynamoDB 备份的**原生支持方式**
- **生命周期策略**
- **合规性、低运维复杂度**

---

### 为什么选 A（AWS Backup）

**AWS Backup 是官方推荐的合规级备份方案**，并且：

- ✅ **原生支持 DynamoDB**
- ✅ 支持 **定期计划（每月）**
- ✅ 支持 **生命周期管理**
  - 热存储 → 冷存储（如 Vault 冷存储）
- ✅ 支持 **长期保留（7 年）**
- ✅ 满足审计、合规、集中管理要求
- ✅ 无需自定义脚本，**运维风险最低**

👉 **这是唯一“企业级、合规友好、全托管”的方案**

---

### 其他选项为什么不对

#### ❌ B. DynamoDB 备份 + S3 Glacier
- DynamoDB **按需备份不能直接转移到 S3**
- DynamoDB 备份 **不是 S3 对象**
- ❌ 架构不成立

---

#### ❌ C. SDK + 多脚本
- 理论可行，但：
  - ❌ 运维复杂
  - ❌ 不符合“最佳实践”
  - ❌ 合规审计风险高
- 考试中：  
  > **能用托管服务，就不要用脚本**

---

#### ❌ D. CLI 命令直接指定生命周期
- DynamoDB **按需备份 API 不支持**
  - 冷存储生命周期
  - 自动 7 年删除
- ❌ 功能不存在

---

## DynamoDB 备份方案速记表

| 需求 | 最佳服务 |
|----|----|
| 定期备份 | AWS Backup |
| 生命周期管理 | AWS Backup |
| 合规 / 审计 | AWS Backup |
| 长期（多年）保留 | AWS Backup |
| 低运维 | AWS Backup |

---

## 一句话结论

> **涉及合规 + 长期保留的 DynamoDB 备份 → 无脑选 AWS Backup**
