## 问题 #370

一家制造公司在 **VPC** 中运行一个 **公共的三层 Web 应用程序**。  
应用架构如下：

- 应用运行在 **多个可用区（AZ）** 的 **Amazon EC2 实例** 上  
- **私有子网** 中的 EC2 实例需要：
  - **主动访问互联网**
  - 例如访问第三方认证服务器  
- 公司希望：
  - 使用 **托管解决方案**
  - **尽量减少运营和维护开销**

哪种解决方案可以满足这些要求？

A. 在公共子网中配置一个 NAT 实例，并将私有子网默认路由指向该 NAT 实例  
B. 在私有子网中配置一个 NAT 实例，并将私有子网默认路由指向该 NAT 实例  
C. 在公共子网中配置一个 NAT 网关，并将私有子网默认路由指向该 NAT 网关  
D. 在私有子网中配置一个 NAT 网关，并将私有子网默认路由指向该 NAT 网关  

---

## 正确答案
**👉 C**

---

## 解析

### 考点
- 私有子网访问互联网的标准架构
- NAT Gateway vs NAT Instance
- 托管服务 vs 自管理
- **最少运营开销**

---

## 为什么选 C

### ✅ 公共子网中的 NAT Gateway = 标准答案

**这是 AWS 官方推荐、也是 SAA 的标准架构：**

> 私有子网中的实例  
> → 通过 **公共子网中的 NAT Gateway**  
> → 出站访问互联网

---

### 1️⃣ NAT Gateway 是完全托管的服务

- NAT Gateway：
  - AWS 全托管
  - 自动扩展
  - 高可用
- 不需要：
  - 打补丁
  - 管理实例容量
  - 配置高可用

👉 **运营成本最低**

---

### 2️⃣ NAT Gateway 必须部署在公共子网

- 公共子网特点：
  - 有到 Internet Gateway 的路由
- NAT Gateway：
  - 需要公网出口
  - **必须放在公共子网**

👉 架构逻辑正确、路径完整

---

### 3️⃣ 私有子网只需要改路由表

- 私有子网路由表：
  - `0.0.0.0/0 → NAT Gateway`
- 私有 EC2：
  - 无公网 IP
  - 仍可访问互联网（仅出站）

👉 满足安全与功能双重要求

---

## 其他选项为什么错

### ❌ A. 公共子网中的 NAT 实例
- NAT 实例：
  - 需要自己管理：
    - 容量
    - 高可用
    - 安全补丁
- ❌ 运维成本高
- ❌ 已被 NAT Gateway 取代（考试里优先淘汰）

---

### ❌ B. 私有子网中的 NAT 实例
- NAT 必须能访问 Internet Gateway
- 私有子网：
  - 本身不能直连互联网
- ❌ 架构错误

---

### ❌ D. 私有子网中的 NAT 网关
- NAT Gateway：
  - **必须部署在公共子网**
- 私有子网中无法提供公网出口
- ❌ 直接架构错误（硬错项）

---

## 一句话记忆
> **私有子网访问互联网 + 低运维 → 公共子网的 NAT Gateway**

### 考试秒杀版
> **看到“私有子网出网 + 最少运维”——不用想，选 NAT Gateway（公共子网）**
