## 问题 #342

一家交易处理公司**每周**在 **Amazon EC2 实例**上运行**脚本化的批处理作业**。  
这些 EC2 实例位于 **Auto Scaling 组**中。

已知条件：
- 每次运行时 **CPU 利用率至少达到 60%**
- 每周运行一次，**时间固定**
- 需要在作业运行前 **30 分钟预先准备容量**
- 目前通过**人工修改 Auto Scaling 参数**
- 公司**没有资源分析容量趋势**
- 希望 **自动化 + 最低运营开销**

哪种解决方案可以满足这些要求？

A. 为 Auto Scaling 组创建一个动态扩展策略，基于 CPU 利用率进行扩展，目标值设为 60%。  
B. 为 Auto Scaling 组创建一个**计划扩展策略**，设置期望容量、最小和最大容量。将策略配置为**每周重复执行**，并将开始时间设为**批处理作业运行前 30 分钟**。  
C. 为 Auto Scaling 组创建一个预测性扩展策略，基于 CPU 利用率进行预测扩展，并设置实例在作业运行前 30 分钟预启动。  
D. 使用 Amazon EventBridge 监控 CPU 利用率达到 60%，触发 AWS Lambda 动态调整 Auto Scaling 组容量。  

---

## 正确答案
**👉 B**

---

## 解析

### 考点
- **Auto Scaling 扩展策略类型**
- 计划扩展（Scheduled Scaling） vs 动态 / 预测扩展
- **固定时间批处理作业的容量准备**
- 最低运营成本、最低复杂度

---

## 为什么选 B

### ✅ 固定时间 + 周期性任务 = 计划扩展

题目关键信息非常明确：

- ✅ **每周运行一次**
- ✅ **运行时间可预知**
- ✅ 需要在运行前 **30 分钟预扩容**
- ❌ 没有资源做趋势分析

👉 **这正是 Scheduled Scaling（计划扩展）的典型使用场景**

---

### 1️⃣ 计划扩展不依赖指标、不需要分析

- 直接指定：
  - 期望容量
  - 最小 / 最大容量
- 按 **时间触发**
- 与 CPU、历史数据 **完全解耦**

👉 **零分析成本**

---

### 2️⃣ 精准满足“提前 30 分钟扩容”

- 可直接设置：
  - `StartTime = 作业开始时间 - 30 分钟`
  - `Recurrence = 每周`
- 实例在作业开始前已 Ready

👉 **完全命中题目要求**

---

### 3️⃣ 运营开销最低

- 无 Lambda
- 无 EventBridge
- 无指标调优
- 无预测模型

👉 **Auto Scaling 原生能力，最简单、最稳**

---

## 其他选项为什么错

### ❌ A. 动态扩展（基于 CPU）
- CPU 到 60% 才扩展
- ❌ **不能提前 30 分钟准备容量**
- ❌ 批处理作业启动时可能已性能不足

---

### ❌ C. 预测性扩展
- 需要历史数据
- 需要时间训练预测模型
- 公司明确说明：
  > **没有资源分析容量趋势**
- ❌ 过度设计

---

### ❌ D. EventBridge + Lambda
- 自定义逻辑
- 运维复杂
- 非必要组件
- ❌ 明显不符合“最低运营开销”

---

## 一句话记忆
> **固定时间运行的批处理作业 → Scheduled Scaling**

### 考试秒杀版
> **看到“每周 / 每天固定时间 + 提前扩容” → 直接选计划扩展（Scheduled Scaling）**

---

## 问题 #342（修正答案）

一家交易处理公司**每周**在 **Amazon EC2 实例**上运行**脚本化的批处理作业**。  
这些 EC2 实例位于 **Auto Scaling 组**中。

已知条件：
- 每次运行时 **CPU 利用率至少达到 60%**
- 每周运行一次，但**事务数量存在波动**
- 需要在作业运行前 **30 分钟预先准备容量**
- 目前通过**人工修改 Auto Scaling 参数**
- 公司**没有资源分析容量趋势**
- 希望 **自动化 + 最低运营开销**

哪种解决方案可以满足这些要求？

A. 为 Auto Scaling 组创建一个动态扩展策略，基于 CPU 利用率进行扩展，目标值设为 60%。  
B. 为 Auto Scaling 组创建一个计划扩展策略，设置期望容量、最小和最大容量。将策略配置为每周重复，并在作业运行前 30 分钟触发。  
C. 为 Auto Scaling 组创建一个**预测性扩展策略**，基于 **CPU 利用率**进行预测扩展，并配置实例在作业运行前 **30 分钟预启动**。  
D. 使用 Amazon EventBridge 监控 CPU 利用率达到 60%，触发 AWS Lambda 动态调整 Auto Scaling 组容量。  

---

## 正确答案
**👉 C**

---

## 解析

### 考点
- **Auto Scaling 预测性扩展（Predictive Scaling）**
- 规律性负载 + 负载波动
- 提前扩容（Warm-up）
- 降低人工干预与运营成本

---

## 为什么选 C

### ✅ 规律运行 + 负载不稳定 = 预测性扩展

题目里有两个**非常关键**的信号：

1. **每周运行（有周期性）**
2. **事务数量存在波动（不可固定容量）**

👉 这正是 **Predictive Scaling** 的设计初衷。

---

### 1️⃣ Predictive Scaling 能自动分析历史趋势

- Auto Scaling 会：
  - 自动分析 **历史 CPU 利用率**
  - 识别 **周期性模式**
  - 预测未来所需容量
- **不需要人工做容量趋势分析**

👉 完全符合：
> “公司没有资源来分析容量趋势”

---

### 2️⃣ 支持提前预启动实例（30 分钟）

- Predictive Scaling 支持：
  - **提前扩容（提前 Warm up）**
- 可配置：
  - 在作业运行前 **30 分钟启动实例**
- 避免作业启动瞬间资源不足

👉 精准命中题目硬性要求

---

### 3️⃣ 比计划扩展更智能

| 对比项 | 计划扩展（B） | 预测性扩展（C） |
|------|--------------|----------------|
| 是否自动分析负载 | ❌ 否 | ✅ 是 |
| 是否适应事务波动 | ❌ 否 | ✅ 是 |
| 是否需人工调整容量 | ✅ 需要 | ❌ 不需要 |
| 运营成本 | 低 | **更低（长期）** |

👉 当负载 **不恒定** 时，预测性扩展更优

---

### 4️⃣ 运维复杂度低于 Lambda 方案

- 无需：
  - 自定义逻辑
  - EventBridge
  - Lambda 维护
- 全部是 **Auto Scaling 原生能力**

👉 自动化程度最高

---

## 其他选项为什么错

### ❌ A. 动态扩展
- 只能在 CPU 已经升高后扩展
- ❌ 无法提前 30 分钟准备容量
- 批处理作业启动阶段性能风险高

---

### ❌ B. 计划扩展
- 需要**人工指定容量**
- 无法应对：
  - 每周事务量变化
- ❌ 不满足“事务数量不同”的前提

---

### ❌ D. EventBridge + Lambda
- 自定义方案
- 运维复杂
- 明显过度设计
- ❌ 不符合“最低运营开销”

---

## 一句话记忆
> **周期**
