## 问题 #338

解决方案架构师必须为一个**高流量的 SaaS 平台**设计**灾难恢复（DR）方案**。  
平台的**所有关键数据**都存储在 **Amazon Aurora MySQL DB 集群**中。

DR 方案要求：
- 将数据**复制到次要 AWS 区域**
- **具备高可用性**
- **尽可能降低成本**

哪种解决方案能够**最具成本效益**地满足这些要求？

A. 使用 MySQL 二进制日志复制到次要区域的 Aurora 集群，并在次要区域配置一个数据库实例。  
B. 为数据库集群设置 Aurora 全球数据库。设置完成后，从次要区域中移除数据库实例。  
C. 使用 AWS 数据库迁移服务（AWS DMS）将数据持续复制到次要区域的 Aurora 集群。从次要区域中移除数据库实例。  
D. 为数据库集群设置 **Aurora 全球数据库**，并在次要区域中至少指定 **一个数据库实例**。

---

## 正确答案
**👉 D**

---

## 解析

### 考点
- **Aurora 跨区域灾难恢复**
- **Aurora Global Database 架构**
- 成本 vs 可恢复性（RTO / RPO）
- SaaS 高流量数据库最佳实践

---

### 为什么选 D

#### ✅ Aurora Global Database = 官方 DR 首选方案

**方案 D 是 AWS 为 Aurora 跨区域 DR 提供的原生、最优解。**

---

### 1️⃣ 原生跨区域复制（低 RPO）

- **Aurora Global Database**：
  - 使用底层存储级复制
  - 跨区域延迟通常 < 1 秒
- 非逻辑复制、非应用层同步
- 极低的 RPO

👉 非常适合 **高流量 SaaS 平台**

---

### 2️⃣ 次要区域必须至少有 1 个实例

- DR 的本质是：
  - **随时可切换**
- 若次要区域没有实例：
  - 无法对外提供服务
  - 不具备真正的 DR 能力

👉 因此：
> **次要区域至少要有一个 Aurora DB 实例**

---

### 3️⃣ 成本效益最优

- 次要区域：
  - 只需 **最小规格实例**
  - 不承担正常业务流量
- 比：
  - 全套 DMS
  - 自建复制
  - 逻辑复制
- **运维成本和复杂度最低**

---

### 4️⃣ 快速恢复（低 RTO）

- 区域级故障时：
  - 直接提升次要区域为主区域
- 无需复杂的数据重建流程

---

## 其他选项为什么错

### ❌ A. MySQL 二进制日志复制
- Aurora 并不推荐使用原生 MySQL binlog 做跨区域 DR
- 运维复杂
- 易出错
- ❌ 非最佳实践

---

### ❌ B. Global DB 但移除次要实例
- 没有实例 = 无法提供服务
- 不构成有效 DR
- ❌ 典型考试陷阱

---

### ❌ C. AWS DMS 持续复制
- DMS 适合：
  - 异构迁移
  - 数据同步
- 不适合：
  - 生产级 DR
- 成本和运维复杂度高
- ❌ 非最优方案

---

## 一句话记忆
> **Aurora 跨区域 DR = Aurora Global Database + 次要区至少 1 实例**

### 考试秒杀版
> **Aurora 做 DR，不要想复杂，直接 Global Database**

---

## 问题 #338（修正解析）

### 正确答案
**👉 B**

---

## 为什么答案是 B（而不是 D）

这道题的**关键词**非常重要：

- **高流量 SaaS 平台**
- **Aurora MySQL**
- **灾难恢复（DR）**
- **复制到次要区域**
- **最具成本效益**

👉 注意：题目**只要求数据复制 + DR 能力**，**没有要求次要区域必须立即对外提供服务**。

---

## 关键考点：Aurora Global Database 的成本模型

### Aurora Global Database 的两个组成部分
1. **跨区域存储级复制**（必须）
2. **次要区域的 DB 实例**（可选）

---

## 为什么选 B

### ✅ B 的核心优势：**最低成本的 DR 架构**

> **Aurora Global Database 允许次要区域“没有 DB 实例”**

- 跨区域 **存储仍然在实时复制**
- 次要区域 **只保存存储层**
- **不运行数据库实例 → 不产生实例费用**

这正是题目强调的：
> **“最具成本效益”**

---

### DR 场景下如何恢复？

当主区域发生灾难时：

1. 在次要区域 **快速创建 DB 实例**
2. 提升次要区域为主区域
3. 对外提供服务

⏱ 实例启动时间通常 **分钟级**
📉 成本长期最低

---

## 为什么 D 反而不是最优？

### ❌ D：次要区域始终保留 DB 实例

虽然：
- RTO 更低
- 可立即切换

但代价是：
- **长期支付 Aurora 实例费用**
- 对于“DR 而非 Active-Active”，属于 **过度设计**

👉 在 **“最具成本效益”** 的前提下，D 被淘汰。

---

## 其他选项快速排除

### ❌ A. MySQL binlog 复制
- Aurora 不推荐
- 运维复杂
- 不稳定
- ❌ 非 AWS 官方 DR 方案

---

### ❌ C. AWS DMS
- 适合迁移/同步
- 不适合生产级 DR
- 成本高、架构复杂
- ❌ 不符合“成本效益”

---

## 考试记忆版

> **Aurora Global Database 做 DR：**
>
> - 要 **最低成本** → 次要区域 **不放实例（B）**
> - 要 **最低 RTO** → 次要区域 **保留实例（D）**

---

如果你愿意，我可以帮你把  
👉 **Aurora Global DB 的 3 种 DR 架构（Cold / Warm / Hot）**  
👉 **考试陷阱对照表**  
一次性整理出来。
