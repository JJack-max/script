## 问题 #236（纠错后）

一家**公司**有一个用于**图像共享**的**三层应用程序**。  
该应用程序使用：
- 一个 Amazon EC2 实例作为**前端层**
- 一个 Amazon EC2 实例作为**应用程序层**
- 第三个 Amazon EC2 实例作为 **MySQL 数据库**

解决方案架构师必须设计一个**可扩展且高可用**的解决方案，并且需要**对应用程序的更改最少**。  
哪种解决方案满足这些要求？

A. 使用 Amazon S3 托管前端层。使用 AWS Lambda 作为应用程序层。将数据库迁移到 Amazon DynamoDB。使用 Amazon S3 存储和服务图像。  
B. 使用**负载均衡的多可用区 AWS Elastic Beanstalk 环境**作为前端层和应用程序层。将数据库迁移到**具有多个只读副本的 Amazon RDS** 实例以服务图像。  
C. 使用 Amazon S3 托管前端层。在应用程序层使用一个 Auto Scaling 组中的 EC2 实例。将数据库移动到**内存优化实例类型**以存储和服务图像。  
D. 使用**负载均衡的多可用区 AWS Elastic Beanstalk 环境**用于前端层和应用程序层。将数据库移动到 **Amazon RDS Multi-AZ** 数据库实例。使用 **Amazon S3** 存储和服务用户的图像。

---

## 正确答案
**👉 D**

---

## 解析

### 考点
- 三层架构的 **高可用 + 可扩展**
- **最小化应用改动**
- 正确拆分 **计算 / 数据库 / 静态内容**
- AWS 官方推荐架构

---

### 为什么选 D

- **Elastic Beanstalk（Multi-AZ + Load Balancer）**
  - 自动部署
  - 自动扩展
  - 高可用
  - **对现有 EC2 应用改动极少**
- **Amazon RDS Multi-AZ**
  - 原生支持 MySQL
  - 同步复制
  - 自动故障切换
  - **无需改 SQL 逻辑**
- **Amazon S3 存储和分发图像**
  - 对象存储，天然可扩展
  - 高可用（11 个 9）
  - 减轻 EC2 / 数据库压力

👉 **这是 AWS 三层应用的“标准答案架构”**

---

### 其他选项为什么错

#### ❌ A. S3 + Lambda + DynamoDB
- 架构变化极大
- MySQL → DynamoDB 是**重构级别**
- 不符合“**对应用程序更改最少**”

---

#### ❌ B. RDS 只读副本存储图像
- **图像不应存数据库**
- Read Replica 解决的是**读扩展**
- 并未解决图像存储与分发问题

---

#### ❌ C. 内存优化实例存储图像
- 内存实例 ≠ 对象存储
- 成本极高
- 没有高可用保障
- 属于**反模式设计**

---

## 一句话记忆
> **三层应用最小改动升级 = EB（多 AZ）+ RDS Multi-AZ + S3**

如果你看到：
- “三层架构”
- “最少改动”
- “高可用 + 可扩展”

👉 **直接锁定 Elastic Beanstalk + RDS Multi-AZ + S3**
