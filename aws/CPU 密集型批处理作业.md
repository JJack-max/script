## 问题 #355

一家公司正在将一个**旧应用程序**迁移到 AWS。  
该应用程序**每小时运行一次批处理作业**，并且是**CPU 密集型**。

当前本地环境特征：
- 批处理作业平均运行时间：**15 分钟**
- 服务器规格：
  - **64 vCPU**
  - **512 GiB 内存**

公司目标：
- 每次作业仍需在 **15 分钟内完成**
- **尽量减少运营开销**
- 无需长期运行资源（按需即可）

哪种解决方案能够**以最少的运营开销**满足这些要求？

A. 使用具有功能扩展的 **AWS Lambda**  
B. 使用 **Amazon ECS + AWS Fargate**  
C. 使用 **Amazon Lightsail + Auto Scaling**  
D. 在 **Amazon EC2 上使用 AWS Batch**

---

## 正确答案
**👉 D**

---

## 解析

### 考点
- **CPU 密集型批处理作业**
- **大规模计算资源（高 vCPU / 高内存）**
- 按需调度 vs 长期运行
- **最小运维成本的计算型架构**

---

## 为什么选 D

### ✅ AWS Batch = 批处理计算的最优解

**AWS Batch 是 AWS 为“高性能 / 批处理 / 定时计算”场景设计的原生服务。**

---

### 1️⃣ 完美匹配 CPU 密集型工作负载

- 支持：
  - 高 vCPU 实例
  - 高内存实例
- 可以精确选择：
  - `c` / `m` / `r` 系列
  - 大规格实例（满足 64 vCPU 级别需求）

👉 非常适合 **15 分钟内完成的大型计算任务**

---

### 2️⃣ 按需启动，作业结束即释放资源

- AWS Batch：
  - 作业开始 → 自动启动 EC2
  - 作业结束 → 自动释放 EC2
- 不需要：
  - 长期运行集群
  - 手动扩缩容
  - 人工调度

👉 **运营开销极低**

---

### 3️⃣ 原生支持调度与队列

- 内置：
  - 作业队列
  - 调度策略
  - 失败重试
- 非常适合：
  - 每小时运行一次的批处理任务

---

### 4️⃣ 比 ECS / Fargate 更适合“大算力 + 短时任务”

- Batch 专注：
  - HPC
  - 批处理
  - 科学计算
  - 数据处理

---

## 其他选项为什么错

### ❌ A. AWS Lambda
- Lambda 限制：
  - 最大执行时间：**15 分钟**
  - vCPU 与内存上限有限
- **CPU 密集型 + 超大内存需求** 不适合
- ❌ 典型陷阱选项

---

### ❌ B. ECS + Fargate
- Fargate：
  - 适合微服务 / 长运行服务
  - 不适合一次性超大计算任务
- 成本：
  - 对高规格短时任务不友好
- 运维复杂度 > AWS Batch

---

### ❌ C. Amazon Lightsail
- Lightsail：
  - 面向轻量 Web / Demo
- 不支持：
  - 高 vCPU
  - 大内存
  - 批处理调度
- ❌ 明显不匹配

---

## 一句话记忆
> **大算力 + 短时间 + 定时批处理 = AWS Batch**

### 考试秒杀版
> **CPU 密集型批处理作业 → 直接选 AWS Batch**
