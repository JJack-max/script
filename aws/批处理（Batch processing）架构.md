## 问题 #369

一家制造公司已将应用程序迁移到 **Amazon EC2 Linux 实例**。  
当前架构特点如下：

- EC2 实例 **按计划运行多个 1 小时左右的任务**
- 这些任务：
  - 由 **不同团队编写**
  - **没有统一的编程语言**
- 公司担心：
  - 单一 EC2 实例上的 **性能瓶颈**
  - **扩展性不足**

要求：
- 需要一个 **可扩展的解决方案**
- **最少的运营开销（Low operational overhead）**

哪种解决方案最符合这些要求？

A. 使用 AWS Batch 将任务作为作业运行，并使用 Amazon EventBridge 调度作业  
B. 将 EC2 实例转换为容器，使用 AWS App Runner 按需创建容器运行任务  
C. 将任务复制到 AWS Lambda 函数中，并使用 Amazon EventBridge 调度 Lambda  
D. 创建 EC2 实例的 AMI，并使用 Auto Scaling Group 运行多个实例副本  

---

## 正确答案
**👉 A**

---

## 解析

### 考点
- 批处理（Batch processing）架构
- 异构任务（多语言、多团队）
- 计算资源自动扩缩
- **最少运维成本**

---

## 为什么选 A

### ✅ AWS Batch = 为“定时 + 多任务 + 可扩展”而生

**AWS Batch 非常适合本题这种典型场景：**

1. **定时运行的批处理任务**
2. **任务执行时间较长（1 小时）**
3. **任务来源复杂、语言不统一**
4. **无需手动管理实例扩缩**

---

### 1️⃣ 不要求统一编程语言

- AWS Batch 的任务本质是：
  - 容器化的作业
- 每个团队：
  - 使用自己熟悉的语言
  - 只需提供可执行环境（Docker）

👉 完美解决“没有共同编程语言”的问题

---

### 2️⃣ 自动扩展，解决性能与并发问题

- AWS Batch：
  - 根据作业队列自动启动 / 释放 EC2 或 Fargate
  - 多任务可并行运行
- 不再受限于：
  - 单一 EC2 实例性能

👉 **天然支持横向扩展**

---

### 3️⃣ EventBridge + Batch = 低运维的定时执行

- 使用 EventBridge：
  - 定时触发 Batch 作业
- 无需：
  - 自己写调度脚本
  - 管理 cron + 实例生命周期

👉 **托管调度 + 托管计算**

---

## 其他选项为什么错

### ❌ B. 使用 AWS App Runner
- App Runner 适合：
  - 长时间运行的 Web / API 服务
- ❌ 不适合：
  - 定时批处理任务
  - 作业型（Job-based）执行模型
- ❌ 架构不匹配

---

### ❌ C. 使用 AWS Lambda
- Lambda 限制：
  - **最大执行时间 15 分钟**
- 题目中任务：
  - 每个约 **1 小时**
- ❌ 直接不满足硬性条件

---

### ❌ D. 使用 Auto Scaling Group
- ASG 问题：
  - 需要自行管理：
    - 任务调度
    - 任务分发
    - 实例生命周期
- ❌ 运维成本高
- ❌ 相当于“自己造一个 Batch”

---

## 一句话记忆
> **定时运行、长时间、多语言批处理任务 → AWS Batch**

### 考试秒杀版
> **EC2 跑批处理 + 担心性能和扩展 → 不要 ASG，直接上 AWS Batch**
